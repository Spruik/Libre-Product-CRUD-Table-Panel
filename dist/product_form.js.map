{"version":3,"sources":["../src/product_form.js"],"names":["utils","apis","_onAddTopping","length","scope","productFormModal","ingredient","toppings","maxToppingNum","topping","id","name","oz","gramsOnScale","gramsTotal","push","addPreprocess","productGroup","productGroups","productId","productDesc","comment","crust","sauce","func","onAddTopping","onRemoveTopping","pop","submitBtnMsg","onSubmit","product","findProductById","products","alert","addProduct","successCallBack","failCallBack","e","viewPreprocess","cur","currentProduct","productFormViewModal","product_group","product_id","product_desc","updatePreprocess","tempProductForm","copy","match","hasObjectChanged","updateProduct","showAddProductFormModal","showLargeModal","showViewProductFormModal","showUpdateProductFormModal","removeProduct","confirmModal","confirmMsg","onConfirm","showModal"],"mappings":"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","file":"product_form.js","sourcesContent":["import * as utils from './utils'\nimport * as apis from './apis'\n\nconst _onAddTopping = scope => {\n  const length = scope.productFormModal.ingredient.toppings.length\n  const maxToppingNum = 10\n  if (length >= maxToppingNum) { return }\n  const topping = {\n    id: length + 1,\n    name: \"\",\n    oz: null,\n    gramsOnScale: null,\n    gramsTotal: null\n  }\n  scope.productFormModal.ingredient.toppings.push(topping)\n}\n\nconst addPreprocess = scope => {\n  //init data\n  scope.productFormModal = {\n    productGroup: scope.productGroups[0] || \"\",\n    productId: null,\n    productDesc: \"\",\n    comment: \"\",\n    ingredient: {\n      crust: {\n        name: \"\",\n        oz: null,\n        gramsOnScale: null,\n        gramsTotal: null\n      },\n      sauce: {\n        name: \"\",\n        oz: null,\n        gramsOnScale: null,\n        gramsTotal: null\n      },\n      toppings: [\n        {\n          id: 1,\n          name: \"\",\n          oz: null,\n          gramsOnScale: null,\n          gramsTotal: null\n        }\n      ]\n    },\n    func: {\n      onAddTopping: () => {\n        _onAddTopping(scope)\n      },\n      onRemoveTopping: () => { \n        scope.productFormModal.ingredient.toppings.pop() \n      }\n    },\n    submitBtnMsg: 'Submit'\n  }\n\n  scope.productFormModal.func.onSubmit = () => {\n    const product = scope.productFormModal\n    \n    if (utils.findProductById(scope.products, product.productId).length !== 0) {\n      utils.alert('warning', 'Warning', `Product With Product ID \"${product.productId}\" Already Exists`)\n      return\n    }\n\n    apis.addProduct(\n      product.productGroup, \n      product.productDesc, \n      product.productId, \n      product.comment,\n      product.ingredient,\n      utils.successCallBack('pct-product-form-cancelBtn', 'Product Has Been Added Successfully', scope),\n      e => utils.failCallBack('pct-product-form-cancelBtn', `An Error Occurr While Adding The Product Due To ${e}`)\n    )\n  }\n}\n\n/**\n * Data init for viewing product\n * @param {*} scope \n */\nconst viewPreprocess = scope => {\n  const cur = scope.currentProduct\n  scope.productFormViewModal = {\n    productGroup: cur.product_group,\n    productId: cur.product_id,\n    productDesc: cur.product_desc,\n    comment: cur.comment || \"\",\n    ingredient: cur.ingredient,\n  }\n}\n\n/**\n * Data init for updating product\n * @param {*} scope \n */\nconst updatePreprocess = scope => {\n\n  const cur = scope.currentProduct\n\n  scope.productFormModal = {\n    productGroup: cur.product_group,\n    productId: cur.product_id,\n    productDesc: cur.product_desc,\n    comment: cur.comment || \"\",\n    ingredient: cur.ingredient,\n    func: {\n      onAddTopping: () => {\n        _onAddTopping(scope)\n      },\n      onRemoveTopping: () => { \n        scope.productFormModal.ingredient.toppings.pop() \n      }\n    },\n    submitBtnMsg: 'Update'\n  }\n\n  scope.tempProductForm = utils.copy(scope.productFormModal)\n\n  scope.productFormModal.func.onSubmit = () => {\n\n    const product = scope.productFormModal\n    const match = utils.findProductById(scope.products, product.productId)\n\n    //Check if make any changes\n    if (!utils.hasObjectChanged(scope.tempProductForm, product)) {\n      utils.alert('warning', 'Warning', `You Did Not Make Any Changes On It`)\n      return\n    }\n\n    //Check if id is invalid\n    if (match.length !== 0) {\n      if (match[0].product_id !== cur.product_id) {\n        utils.alert('warning', 'Warning', `Product With Product ID \"${product.productId}\" Already Exists`)\n        return\n      }\n    }\n\n    apis.updateProduct(\n      cur.product_id,\n      product.productGroup,\n      product.productDesc,\n      product.productId,\n      product.comment,\n      product.ingredient,\n      utils.successCallBack('pct-product-form-cancelBtn', 'Product Has Been Updated Successfully', scope),\n      e => utils.failCallBack('pct-product-form-cancelBtn', `An Error Occurr While Updating The Product Due To ${e}`)\n    )\n  }\n}\n\nexport const showAddProductFormModal = scope => {\n  addPreprocess(scope)\n  utils.showLargeModal('product_form.html', scope)\n}\n\nexport const showViewProductFormModal = scope => {\n  viewPreprocess(scope)\n  utils.showLargeModal('product_form_view.html', scope)\n}\n\nexport const showUpdateProductFormModal = scope => {\n  updatePreprocess(scope)\n  utils.showLargeModal('product_form.html', scope)\n}\n\nexport const removeProduct = scope => {\n  const id = scope.currentProduct.product_id\n  scope.confirmModal = {\n    confirmMsg: `Please confirm that you want to remove product ${id}`,\n    onConfirm: () => {\n      apis.removeProduct(\n        id, \n        utils.successCallBack('pct-confirm-modal-cancelBtn', `Product ${id} Has Been Removed Successfully`, scope),\n        e => utils.failCallBack('pct-confirm-modal-cancelBtn', `An Error Occurr While Removing The Product Due To ${e}`)\n      )\n    }\n  }\n  utils.showModal('confirm_modal.html', scope)\n}"]}