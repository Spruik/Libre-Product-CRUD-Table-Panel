{"version":3,"sources":["../src/action_options_ctrl.js"],"names":["showActions","rowData","allData","ctrl","utils","showModal","removeListeners","addListeners","$","document","off","on","e","target","id","showProductForm","deleteProduct","data","url","postgRestHost","remove","then","trigger","alert","refresh","catch"],"mappings":";;;;;;AAGO,WAASA,WAAT,CAAqBC,OAArB,EAA8BC,OAA9B,EAAuCC,IAAvC,EAA6C;AAClDC,UAAMC,SAAN,CAAgB,qBAAhB;AACAC;AACAC,iBAAaN,OAAb,EAAsBC,OAAtB,EAA+BC,IAA/B;AACD;;yBAJeH,W;;AAMhB,WAASM,eAAT,GAA2B;AACzBE,MAAEC,QAAF,EAAYC,GAAZ,CAAgB,OAAhB,EAAyB,gEAAzB;AACD;;AAED,WAASH,YAAT,CAAsBN,OAAtB,EAA+BC,OAA/B,EAAwCC,IAAxC,EAA8C;AAC5CK,MAAEC,QAAF,EAAYE,EAAZ,CAAe,OAAf,EAAwB,gEAAxB,EAA0F,aAAK;AAC7F,UAAIC,EAAEC,MAAF,CAASC,EAAT,KAAgB,QAApB,EAA8B;AAC5BC,wBAAgBZ,IAAhB,EAAsBD,OAAtB,EAA+BD,OAA/B;AACD,OAFD,MAEM,IAAGW,EAAEC,MAAF,CAASC,EAAT,KAAgB,QAAnB,EAA6B;AACjCE,sBAAcf,OAAd,EAAuBE,IAAvB;AACD;AACF,KAND;AAOD;;AAED,WAASa,aAAT,CAAuBC,IAAvB,EAA6Bd,IAA7B,EAAkC;AAChC,QAAMe,MAAMd,MAAMe,aAAN,GAAsB,yBAAtB,GAAkDF,KAAK,CAAL,CAA9D;AACAb,UAAMgB,MAAN,CAAaF,GAAb,EAAkBG,IAAlB,CAAuB,eAAO;AAC5B;AACAb,QAAE,wCAAF,EAA4Cc,OAA5C,CAAoD,OAApD;AACAlB,YAAMmB,KAAN,CAAY,SAAZ,EAAuB,SAAvB,EAAkC,0BAAlC;AACApB,WAAKqB,OAAL;AACD,KALD,EAKGC,KALH,CAKS,aAAK;AACZ;AACAjB,QAAE,wCAAF,EAA4Cc,OAA5C,CAAoD,OAApD;AACAlB,YAAMmB,KAAN,CAAY,OAAZ,EAAqB,OAArB,EAA8B,+EAA9B;AACD,KATD;AAUD;;;AAnCWnB,W;;AACJW,qB,iBAAAA,e","file":"action_options_ctrl.js","sourcesContent":["import * as utils from './utils'\nimport {showProductForm} from './product_form'\n\nexport function showActions(rowData, allData, ctrl) {\n  utils.showModal('action_options.html')\n  removeListeners()\n  addListeners(rowData, allData, ctrl)\n}\n\nfunction removeListeners() {\n  $(document).off('click', 'input[type=\"button\"][name=\"master-data-product-actions-radio\"]')\n}\n\nfunction addListeners(rowData, allData, ctrl) {\n  $(document).on('click', 'input[type=\"button\"][name=\"master-data-product-actions-radio\"]', e => {\n    if (e.target.id === 'update') {\n      showProductForm(ctrl, allData, rowData)\n    }else if(e.target.id === 'delete') {\n      deleteProduct(rowData, ctrl)\n    }\n  })\n}\n\nfunction deleteProduct(data, ctrl){\n  const url = utils.postgRestHost + 'products?product_id=eq.' + data[0]\n  utils.remove(url).then(res => {\n    // console.log(res)\n    $('#master-data-product-actions-cancelBtn').trigger('click')\n    utils.alert('success', 'Success', 'Product has been deleted')\n    ctrl.refresh()\n  }).catch(e => {\n    // console.log(e)\n    $('#master-data-product-actions-cancelBtn').trigger('click')\n    utils.alert('error', 'Error', 'Error occurred while deleting the product from the database, please try again')\n  })\n}"]}